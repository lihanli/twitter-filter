(function(){var e,t,n,r,i,o,a,s,c,d,u;t=/[\n\t]/g,e=[".missing-tweets-bar",".conversation-header"],a=null,o=null,c=null,n=function(){function e(e){this.screenName=e.data("screen-name"),this.text=e.find(".tweet-text").text()}return e.prototype.userData=function(){return _.pick(this,"screenName")},e.prototype.shouldHide=function(){var e,t;return t=this.text.toLowerCase(),e=o.map(function(e){return e.get("phrase")}),c.get("hideMentions")&&a.each(function(t){return e.push("@"+t.get("screenName"))}),this.hidden=function(){var n,r,i;if(a.findByScreenName(this.screenName))return!0;for(r=0,i=e.length;i>r;r++)if(n=e[r],-1!==t.indexOf(n))return!0;return!1}.apply(this,arguments)},e.getCachedTweet=function(e){return e.data("tf-tweet")},e}(),s=function(e,n){var r;return r=" "+n+" ",(" "+e.className+" ").replace(t," ").indexOf(r)>-1?!0:!1},r=function(){return i(document.querySelectorAll(".stream-items li"))},i=function(t){var r,i,o,a;return r=$(t),a=[],i=c.get("hideCompletely"),o=function(t){var n;return n=t.parents("ol.conversation-module"),0!==n.length?(n.removeClass("conversation-module"),_.each(e,function(e){return n.find(e).hide()})):void 0},_.each(e,function(e){return r.find(e).show()}),r.parents("ol[data-ancestors]").addClass("conversation-module"),r.find(".tweet").each(function(){var e,t;return e=$(this),t=new n(e),e.data("tf-tweet",t),e.show(),e.find(".content").show(),e.find(".tf-el").remove(),t.shouldHide()&&a.push({$el:e}),e.find(".account-group").after('<a class="toggle-hide tf-el">\n  '+(t.hidden?"Unhide":"Hide")+"\n</a>")}),_.each(a,function(e){var t,r,a;return t=e.$el,a=n.getCachedTweet(t),i?(t.hide(),o(t)):(t=t.find(".content"),r=$('<div class="hidden-message tf-el">\n  '+_.escape(a.screenName)+"'s tweet has been filtered. <a>Show?</a>\n</div>"),r.find("a").click(function(){return t.show(),r.remove()}),t.hide().after(r))})},chrome.storage.sync.get({options:{}},function(e){return c=new models.Options(e.options),c.get("enable")?(d(),chrome.storage.sync.get(["filteredUsers","filteredPhrases"],function(e){return a=models.generateCollection({collectionName:"FilteredUsers",data:e.filteredUsers,anyChangeCb:function(){return r()}}),o=models.generateCollection({collectionName:"FilteredPhrases",data:e.filteredPhrases}),u()})):void 0}),d=function(){var e;return e=location.href,setInterval(function(){var t;return t=location.href,t!==e?(e=t,u()):void 0},500)},u=function(){var e,t,o;return o=null,t=function(){return o&&o.disconnect(),o=new MutationObserver(function(e){return e.forEach(function(e){var t,n;return t=e.addedNodes,n=t[0],t.length>0&&(s(n,"stream-item")||s(n,"conversation-tweet-item")||"LI"===n.tagName&&n.children.length>0&&s(n.children[0],"tweet"))?i(t):void 0})}),o.observe(document.querySelector(".stream-items"),{childList:!0,subtree:!0})},e=function(){return $(".stream-container").on("click",".tweet .toggle-hide",function(){var e,t;return t=n.getCachedTweet($(this).parents(".tweet")),t.hidden?a.remove(a.findByScreenName(t.screenName)):confirm("Hide all of "+t.screenName+"'s tweets? This won't unfollow or block him/her.")?(e=models.generateModelWithSanitizer({Model:models.FilteredUser,attr:"screenName"}),e.set(t.userData()),a.add(e)):void 0})},function(){var n;return n=location.pathname,"/mentions"!==n&&"/i/connect"!==n?(t(),e(),r()):void 0}}()}).call(this);